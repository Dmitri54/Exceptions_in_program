# Исключения в программировании и их обработка (les_01)

**Исключения** — это специальный тип объектов, которые создаются при
возникновении ошибочной ситуации и выбрасываются Java-машиной.

**Код ошибки** — целочисленный код, указывающий на причину ошибки. Для
разных приложений — разные коды ошибок.

## Недостатки кодов ошибок

1. Зачастую код ошибки невозможно отличить от того результата,
который действительно может вернуть метод.
В качестве примера вспомним деление на 0, где -1 — это и возможный
результат, и возможный код ошибки.

2. Разработчик, использующий метод, может забыть, что метод
возвращает какой-то список кодов ошибок, и что на них надо
реагировать.
Этот список ещё где-то надо найти (в документации), что тоже крайне
неудобно.

3. Есть некоторые ошибки, которые обязательно надо обрабатывать.
Допустим, вы подключаетесь к базе данных, и в процессе работы
возникает ошибка, приводящая к завершению работы приложения. В
таком случае надо обязательно закрывать соединение с сервером
базы данных, чтобы не тратить её ресурсы. Желательно, чтобы
проверка наличия обработчика ошибки происходила на этапе
компиляции, что невозможно сделать с кодами ошибок.

4. При возникновении ошибки я вижу только код, но у меня нет
никакой служебной информации, почему это ошибка возникла. То
есть нельзя как-то детализировать, какие входные данные привели к
появлению этой ошибки.

Если я говорю конкретно про язык Java, то метод не может возвращать
два разных типа данных в зависимости от результата работы: в одном
случае, при корректной работе вернуть объект, а в случае возникновения
ошибки — целочисленное значение.

--------------------------------------------------------------------------------
## Исключения

В языке Java для обработки ошибок используются не коды ошибок, а
исключения.

# Исключения и их обработка (les_02)
==============================================================================

1. **Exception** — это ошибка, которую можно «на лету» перехватит и
исправить.
2. **Error** — это критическая (непоправимая) ошибка, которую невозможно
обработать, и которая приведёт к завершению работы JVM (JavaMachine).

**Checked**. 
Пример: Класс Exception и его подклассы — исключения, которые вы обязаны обработать в
моём коде. Если этого не сделать, будет ошибка на этапе компиляции.

**Unchecked**. 
Пример: Класс RuntimeException и его подклассы — исключения, охватывающие такие
ситуации, как деление на ноль или ошибочная индексация массивов.

-------------------------------------------------------------------------------
## Обработка исключений.

Обработка исключений производится одним из двух способов:

1. Поместить код, бросающий исключение, в блок try-catch.

2. Пробросить исключение методу на уровень выше, то есть методу, который вызывает текущий метод. 
Для этого используется ключевое слово throws.

3. [плохой путь] Вообще не обрабатывать исключение. 
Но в таком случае ваш код либо не скомпилируется, либо будет работать крайне нестабильно.

--------------------------------------------------------------------------------------
**Try-catch** — это стандартный обработчик исключений Java, который удобен для отладки. 
Но, как правило, обрабатывать исключения приходится вручную, так как это позволяет исправить 
возникшую ошибку и предотвратить прерывание выполнения программы. 
Для этого достаточно разместить контролируемый код в блоке оператора try, за которым 
должен следовать блок оператора catch, с указанием типа перехватываемого исключения.

● **try** — попытка выполнить код, в котором потенциально может возникнуть исключение.

● **catch** — перехват исключения указанного типа (или его наследника) с целью обработать
возникшую ошибочную ситуацию

### Применение нескольких операторов catch. 
Иногда в одном фрагменте кода может возникнуть несколько разных исключений. 
Чтобы справиться с такой ситуацией, можно указать два или больше оператора catch, 
каждый из которых предназначается для перехвата отдельного типа исключения. 
Когда генерируется исключение, каждый оператор catch проверяется по порядку,
и выполняется тот из них, что совпадает по типу с возникшим исключением.
По завершении одного из операторов catch остальные пропускаются, и выполнение программы 
продолжается с оператора, следующего сразу после блока операторов try/catch.

### Порядок операторов catch
**ВАЖНО сначало нужно описать самые узкие исключения, потом самые общие.**

### Объяснение
**Исключения разного типа требуют разной реакции**
Если я хотил в своей программе передать файл по сети, могут возникнуть
два или больше исключений:
1. **FileNotFoundException** — файл по указанному пути не найден.
2. **IOException** — сетевое соединение разорвалось.

---------------------------------------------------------------------------------------
### Оператор finally
Образует блок кода, который выполняется по завершении блока операторов try/catch, 
но перед следующим за ним кодом. Он выполняется независимо от того, было ли сгенерировано 
исключение или нет, было ли оно перехвачено блоком catch или нет. 
Это удобно для закрытия файловых дескрипторов либо для освобождения других ресурсов, которые
были выделены в начале метода и должны быть освобождены перед возвратом из него. 
Блок finally необязателен, но каждому оператору try требуется хотя бы один оператор catch или finally.




